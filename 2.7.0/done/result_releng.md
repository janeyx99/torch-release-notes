
## releng
### bc breaking

- Use Manylinux 2.28 and CXX11_ABI=1 for following all released Linux wheel builds. With Migration to manylinux_2_28 (AlmaLinux 8 based) we would not be able to support OS distros with glibc2_26, these include popular Amazon Linux 2 and CentOS 7. (#143423) (##146200) (#148028) (#148135) (#148195) (#148129)

### deprecation

- Removed CUDA 12.4 support in CI/CD (#148895) (#142856) (#144118) (#145566) (#145844) (#148602) (#143076) (#148717)
- Removed Anaconda support in CI/CD (#144870) (#145015) (#147792)

### new features

- Added support for CUDA 12.8 in CI/CD  (#145567) (#145789) (#145792) (#145765) (#146019) (#146378) (#146957) (#147037) (#146265) (#147607) (#148000)
- Added Python 3.13 and 3.13t support in CI/CD (#144698) (#143078) (#144697) (#143074) (#141806) (#146614)
- Added aarch64 support for pytorch-triton package (#148768) (#148705)
- Added support Windows XPU CI/CD (#148755) (#147637) (#148313) (#143185) (#148319) (#144316) (#144644) (#144034) (#145255)
- Added support for ROCm MI300 CI/CD (#143673) (#145504) (#146675) (#147904) (#145398) (#145621) (#145829) (#145790) (#144594)
- Added support for PEP585 (#145707) (#145177) (#145708) (#145342) (#145101)
- Added Windows Arm64 Nightly Builds (#139760)

### improvements

- Added possibility to use different NCCL versions for different CUDA versions in CI/CD (#146073) (#146943)
- Added TorchCache Benchmark tests (#147641) (#147688) (#147782) (#147780) (#147781) (#147783) (#147546)
- Upgrade CI/CD to 6.3 for ROCm (#142152) (#142151) (#143613)
- Add cufile to a dependency list for CUDA 12.x builds and enable use by default (#145748) (#148465) (#148137)
- Add support for gfx1102 and gfx12 to ROCm  wheel and libtorch builds (#147761) (#148562)
- Added Inductor dashboard benchmarks  (#144427) (#145791) (#145654) (#145655) (#146449) (#145683) (#141371) (#143223)

### bug fixes
### performance
- Add perf testing on H100 (#146868) (#147947)

### docs

### devs

- Deprecate usage of pytorch/builder repository (#143776) (#144317)
- Release engineering tooling, CI fixes and additional CI tests . Workflows, Trymerge, Bot Labeler, Mergebot (#145793) (#145763) (#147454) (#145863) (#147665) (#145966) (#143560) (#142869) (#141282) (#142854) (#143050) (#143052) (#143129) (#143201) (#141919) (#143316) (#143327) (#148469) (#143395) (#143511) (#143516) (#143512) (#129409) (#143513) (#147601) (#147228) (#144415) (#145012) (#144574)

### Untopiced
### security

-  Set use-ephemeral runners for windows nightly cpu test jobs (#149001)

### not user facing - cleanup
- Update bug-report.yml to make it not look weird (6b902e6e1ab)
- Update documentation.yml to request english (1ff8a1c4ebe)
- Update documentation.yml (9ec8ecea714)
- [CD] Run smoke tests on MacOS wheel ([#143393](https://github.com/pytorch/pytorch/pull/143393))
- [BE] [CD] Remove pygit2 dep for aarch64_wheel build ([#144716](https://github.com/pytorch/pytorch/pull/144716))
- [CD] Install OpenMP from homebrew ([#145889](https://github.com/pytorch/pytorch/pull/145889))
- [CD] Annotate linux/arm64 cuda wheels with consistent nvidia dependencies ([#145021](https://github.com/pytorch/pytorch/pull/145021))
- [ONNX] Bump onnx and onnxscript versions in CI ([#146097](https://github.com/pytorch/pytorch/pull/146097))
- [ARM] Fix `test_float_to_int_conversion_nonfinite` ([#145367](https://github.com/pytorch/pytorch/pull/145367))
- [ARM] Fix bug in _ref_test_helper in test_ops and fix failing test on Aarch64 ([#146597](https://github.com/pytorch/pytorch/pull/146597))
- [ROCm] Remove benign warning about missing amdgpu.ids ([#147791](https://github.com/pytorch/pytorch/pull/147791))
- Use the build environment as sccache prefix instead of workflow name ([#144112](https://github.com/pytorch/pytorch/pull/144112))
- Use absolute path `path.resolve()` -> `path.absolute()` ([#129409](https://github.com/pytorch/pytorch/pull/129409))
- Fix inductor periodic smoke test wrong artifact ([#144694](https://github.com/pytorch/pytorch/pull/144694))
- [RelEng] Add `--ami` option to build_aarch64 ([#144685](https://github.com/pytorch/pytorch/pull/144685))
- Fix the wrong artifact in remaining workflows ([#144812](https://github.com/pytorch/pytorch/pull/144812))
- Fix `pt2-bug-report.yml` formatting ([#144987](https://github.com/pytorch/pytorch/pull/144987))
- [Utilization][Usage Log] Add data model for record ([#145114](https://github.com/pytorch/pytorch/pull/145114))
- [ROCm] trunk.yml only runs pre-merge via ciflow/trunk label ([#145629](https://github.com/pytorch/pytorch/pull/145629))
- Extend abi-stable nitpick message to all the c stable files ([#145862](https://github.com/pytorch/pytorch/pull/145862))
- [utilization] pipeline to create clean db records ([#145327](https://github.com/pytorch/pytorch/pull/145327))
- [ONNX] Update CI transformers cache ([#146926](https://github.com/pytorch/pytorch/pull/146926))
- [ROCm] Update inductor-periodic.yml to use the correct label ([#147473](https://github.com/pytorch/pytorch/pull/147473))
- Update merge rules for oneDNN part ([#147615](https://github.com/pytorch/pytorch/pull/147615))
- Let aotriton.cmake detect the best binary package to use, and deprecate aotriton_version.txt ([#137443](https://github.com/pytorch/pytorch/pull/137443))
- [CI] Build sm89 with more procs experiment ([#147487](https://github.com/pytorch/pytorch/pull/147487))
- Add a docstring to build.sh (98458e5c81e)
- Add env for disabling meta reference on functionalization. ([#148822](https://github.com/pytorch/pytorch/pull/148822))
- Force symlink creation when building python on s390x ([#143195](https://github.com/pytorch/pytorch/pull/143195))
- [ROCm] Update setup-rocm for almalinux-based images ([#143590](https://github.com/pytorch/pytorch/pull/143590))
- [BE][Easy] use `pathlib.Path` instead of `dirname` / `".."` / `pardir` ([#129374](https://github.com/pytorch/pytorch/pull/129374))
- Update tag_regex in filter_test_configs.py for workflows such as `inductor-rocm` ([#143768](https://github.com/pytorch/pytorch/pull/143768))
- [ROCm] Use `linux.rocm.gpu.2` for 2-GPU and `linux.rocm.gpu.4` for 4-GPU runners ([#143769](https://github.com/pytorch/pytorch/pull/143769))
- ROCm: Enable 4 gpu tests for distributed config ([#140319](https://github.com/pytorch/pytorch/pull/140319))
- [CI] Multigpu 1 -> 2 shards ([#143992](https://github.com/pytorch/pytorch/pull/143992))
- [ROCm] Print amdgpu info on bare metal for CI runners ([#144038](https://github.com/pytorch/pytorch/pull/144038))
- [CI] Checkout with more processes ([#147652](https://github.com/pytorch/pytorch/pull/147652))
- Reference the commit explicitly ([#148026](https://github.com/pytorch/pytorch/pull/148026))
- ci: Only run CI specific things when in CI ([#148126](https://github.com/pytorch/pytorch/pull/148126)
- Allow ROCm runner to upload benchmark results if found ([#144710](https://github.com/pytorch/pytorch/pull/144710))
- Add Intel GPU specific CMake files to merge rules ([#135110](https://github.com/pytorch/pytorch/pull/135110))
- [CI] Add xpu linux build into pull workflow ([#145084](https://github.com/pytorch/pytorch/pull/145084))-
- [aarch64] fix TORCH_CUDA_ARCH_LIST for cuda arm build ([#144436](https://github.com/pytorch/pytorch/pull/144436))
- Improve cleanup of cancelled jobs on s390x for tests too ([#144968](https://github.com/pytorch/pytorch/pull/144968))
- [EZ] [CD] Eliminate stale TODO ([#144696](https://github.com/pytorch/pytorch/pull/144696))
- [BE] Bump TIMM pin ([#145320](https://github.com/pytorch/pytorch/pull/145320))
- Fix ExecuTorch, XLA, Triton hash updates ([#145314](https://github.com/pytorch/pytorch/pull/145314))
- [audio hash update] update the pinned audio hash ([#145328](https://github.com/pytorch/pytorch/pull/145328))
- [executorch hash update] update the pinned executorch hash ([#147241](https://github.com/pytorch/pytorch/pull/147241))
- [executorch hash update] update the pinned executorch hash ([#147273](https://github.com/pytorch/pytorch/pull/147273))
- [executorch hash update] update the pinned executorch hash ([#147294](https://github.com/pytorch/pytorch/pull/147294))
- [executorch hash update] update the pinned executorch hash ([#140769](https://github.com/pytorch/pytorch/pull/140769))
- [executorch hash update] update the pinned executorch hash ([#147345](https://github.com/pytorch/pytorch/pull/147345))
- [executorch hash update] update the pinned executorch hash ([#145128](https://github.com/pytorch/pytorch/pull/145128))
- [executorch hash update] update the pinned executorch hash ([#147157](https://github.com/pytorch/pytorch/pull/147157))
- [executorch hash update] update the pinned executorch hash ([#144813](https://github.com/pytorch/pytorch/pull/144813))
- [executorch hash update] update the pinned executorch hash ([#145022](https://github.com/pytorch/pytorch/pull/145022))
- [audio hash update] update the pinned audio hash ([#147423](https://github.com/pytorch/pytorch/pull/147423))
- [audio hash update] update the pinned audio hash ([#146738](https://github.com/pytorch/pytorch/pull/146738))
- [audio hash update] update the pinned audio hash ([#145988](https://github.com/pytorch/pytorch/pull/145988))
- [CD] Test that all PyTorch wheels support OpenMP ([#143394](https://github.com/pytorch/pytorch/pull/143394))
- [audio hash update] update the pinned audio hash ([#143245](https://github.com/pytorch/pytorch/pull/143245))
- [audio hash update] update the pinned audio hash ([#143265](https://github.com/pytorch/pytorch/pull/143265))
- [audio hash update] update the pinned audio hash ([#143694](https://github.com/pytorch/pytorch/pull/143694))
- Honor Dr.CI classification results on auto commit hash update ([#146337](https://github.com/pytorch/pytorch/pull/146337))
- [release] Move triton pin to latest triton release/3.3.x ([#148971](https://github.com/pytorch/pytorch/pull/148971))
- [CI] Disable sccache for xpu test ([#143851](https://github.com/pytorch/pytorch/pull/143851))
- Update torch-xpu-ops commit pin ([#144739](https://github.com/pytorch/pytorch/pull/144739))
- Docker release - pin buildkit to v0.19.0 ([#148372](https://github.com/pytorch/pytorch/pull/148372))
- [BE] Relax sympy dependency to 1.13.3 or newer ([#148575](https://github.com/pytorch/pytorch/pull/148575))
- [BE] Move cuda12.6 builds to gcc11 ([#148740](https://github.com/pytorch/pytorch/pull/148740))
- Delete duplicate entry from `docker-builds.yml` ([#148782](https://github.com/pytorch/pytorch/pull/148782))
- ci: Switch manywheel build.sh to just use dev ([#148310](https://github.com/pytorch/pytorch/pull/148310))
- ci: Consolidate commit hash updates into a matrix ([#148466](https://github.com/pytorch/pytorch/pull/148466))
- ci: Add triton to update hash workflow ([#148472](https://github.com/pytorch/pytorch/pull/148472))
- ci: Add workflow dispatch for commit hash update ([#148486](https://github.com/pytorch/pytorch/pull/148486))
- [CD] Increase timeout for windows binary builds ([#147390](https://github.com/pytorch/pytorch/pull/147390))
- [ROCm] Update inductor-perf-test-nightly-rocm.yml to use the correct labels & frequency ([#147221](https://github.com/pytorch/pytorch/pull/147221))
- Run inductor-rocm workflow on ciflow/inductor ([#143205](https://github.com/pytorch/pytorch/pull/143205))
- [Utilization] post-test-process workflow ([#145310](https://github.com/pytorch/pytorch/pull/145310))
- [BE] Delete split builds ([#148739](https://github.com/pytorch/pytorch/pull/148739))
- Update CURL url for manywheel images ([#148343](https://github.com/pytorch/pytorch/pull/148343))
- Binary builds Docker images - remove cuda 12.1 ([#144575](https://github.com/pytorch/pytorch/pull/144575))
- Triton bump for 3.2 cherry-picks (device context) ([#143409](https://github.com/pytorch/pytorch/pull/143409))
- Triton bump for 3.2 cherry-picks (mmav3 segfault fix, gfx950 support) ([#143302](https://github.com/pytorch/pytorch/pull/143302))
- Use sccache 0.9.0 on ROCm build job ([#144125](https://github.com/pytorch/pytorch/pull/144125))
- Fix broken gpt_fast micro benchmark after #144315 ([#145235](https://github.com/pytorch/pytorch/pull/145235))
- cpp_wrapper: Move #includes to per-device header files ([#145932](https://github.com/pytorch/pytorch/pull/145932))
- [EZ] Update lintrunner in CI to 0.12.7 ([#143073](https://github.com/pytorch/pytorch/pull/143073))
- [EZ] Remove `--pre` from numpy installation command ([#143237](https://github.com/pytorch/pytorch/pull/143237))
- [EZ] Update jinja2 to 3.1.5 ([#143923](https://github.com/pytorch/pytorch/pull/143923))
- Bump jinja2 from 3.1.4 to 3.1.5 in /.ci/docker ([#143844](https://github.com/pytorch/pytorch/pull/143844))
- [BE][Easy] use `pathlib.Path` instead of `dirname` / `".."` / `pardir` ([#129374](https://github.com/pytorch/pytorch/pull/129374))
- Update TorchBench commit to main ([#145455](https://github.com/pytorch/pytorch/pull/145455))
- Update nightly PyTorch version to 2.7.0 (60de73c3c73)
- Use release notes label for module: distributed_checkpoint ([#148352](https://github.com/pytorch/pytorch/pull/148352))
- [BE][CI] bump `ruff` to 0.9.2: multiline `assert` statements ([#144546](https://github.com/pytorch/pytorch/pull/144546))
- Use nightly-wheel-upload env for triton wheel publishing ([#148108](https://github.com/pytorch/pytorch/pull/148108))
- Revert commit that removed windows testing in VS2019-> update  ([#146920](https://github.com/pytorch/pytorch/pull/146920))
- Fix var CUDA_PATH_V128 in cuda128.bat file ([#146906](https://github.com/pytorch/pytorch/pull/146906))
- Leave SCCACHE_S3_KEY_PREFIX empty to share the cache among all build jobs ([#144704](https://github.com/pytorch/pytorch/pull/144704))
- Revert "Upload METADATA file with whl binaries (#143677)" ([#144706](https://github.com/pytorch/pytorch/pull/144706))
- Upload METADATA file with whl binaries ([#143677](https://github.com/pytorch/pytorch/pull/143677))
- Update clickhouse-connect to 0.8.14 ([#144915](https://github.com/pytorch/pytorch/pull/144915))
- [BE][CI] bump `ruff` to 0.9.0: string quote styles ([#144569](https://github.com/pytorch/pytorch/pull/144569))
- S390x cancelled jobs cleanup ([#144149](https://github.com/pytorch/pytorch/pull/144149))
- Update OpenBLAS to 0.3.29 ([#144857](https://github.com/pytorch/pytorch/pull/144857))
- S390x nightly builds timeouts ([#146041](https://github.com/pytorch/pytorch/pull/146041))
- s390x ci: ensure CI starts correctly if token pipe is not removed ([#145840](https://github.com/pytorch/pytorch/pull/145840))
- S390x ci periodic tests ([#125401](https://github.com/pytorch/pytorch/pull/125401))
- s390x: add cleanup for cancelled docker image builds ([#147110](https://github.com/pytorch/pytorch/pull/147110))
- [CI] Ensure ACL is obtained from GitHub ([#141804](https://github.com/pytorch/pytorch/pull/141804)
- Smoke Test skip cuda.gds on windows ([#148060](https://github.com/pytorch/pytorch/pull/148060)))
- Increase the number of perf benchmark shards ([#145534](https://github.com/pytorch/pytorch/pull/145534))
- Add nitpick warning that aoti_torch/c/shim.h is ABI stable ([#145745](https://github.com/pytorch/pytorch/pull/145745))
- Remove FBGEMM sccache hack ([#145664](https://github.com/pytorch/pytorch/pull/145664))
- Fix environment deployment spam ([#145823](https://github.com/pytorch/pytorch/pull/145823))
- Windows builds with VS2022 ([#145319](https://github.com/pytorch/pytorch/pull/145319))
- Fix broken YAML template after #144574 ([#144604](https://github.com/pytorch/pytorch/pull/144604))
- update compile time benchmarks to dump compile times to stdout and csv ([#145447](https://github.com/pytorch/pytorch/pull/145447))
- [CI] Use job name to index into test times json ([#147154](https://github.com/pytorch/pytorch/pull/147154))
- Unify all sympy versions to avoid conflicts within PyTorch ([#147197](https://github.com/pytorch/pytorch/pull/147197))
- Fix workflow for closing nonexistent disable issues ([#146447](https://github.com/pytorch/pytorch/pull/146447))
- Update ET pin to 41e7ffa ([#145831](https://github.com/pytorch/pytorch/pull/145831))
